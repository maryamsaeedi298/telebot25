import os
import telebot
from fuzzywuzzy import process

# Ú¯Ø±ÙØªÙ† ØªÙˆÚ©Ù† Ø§Ø² Ù…ØªØºÛŒØ± Ù…Ø­ÛŒØ·ÛŒ
TOKEN = os.getenv("TOKEN")
bot = telebot.TeleBot(TOKEN)

# Ù„ÛŒØ³Øª Ø³ÙˆØ§Ù„Ø§Øª Ùˆ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ (Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø§ÛŒÙ†Ùˆ ØªØºÛŒÛŒØ± Ø¨Ø¯ÛŒ)
qa_pairs = {
    "Ø³Ù„Ø§Ù…": "Ø³Ù„Ø§Ù…! Ú†Ø·ÙˆØ± Ù…ÛŒØªÙˆÙ†Ù… Ú©Ù…Ú©Øª Ú©Ù†Ù…ØŸ ğŸ˜Š",
    "Ø®Ø¯Ø§Ø­Ø§ÙØ¸": "Ø®Ø¯Ø§Ù†Ú¯Ù‡Ø¯Ø§Ø±! Ø§Ù…ÛŒØ¯ÙˆØ§Ø±Ù… Ø²ÙˆØ¯ØªØ± Ø¨Ø±Ú¯Ø±Ø¯ÛŒ. ğŸ‘‹",
    "Ø§Ø³Ù… ØªÙˆ Ú†ÛŒÙ‡ØŸ": "Ù…Ù† ÛŒÙ‡ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… Ù‡Ø³ØªÙ… ğŸ¤–",
    "Ø³Ø§Ø¹Øª Ú†Ù†Ø¯Ù‡ØŸ": "Ù…ØªØ£Ø³ÙÙ…ØŒ Ù…Ù† Ù‡Ù†ÙˆØ² Ø³Ø§Ø¹Øª Ù†Ø¯Ø§Ø±Ù…! â°",
    "Ú†Ø·ÙˆØ± Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… Ø¨Ù‡ Ø±Ø¨Ø§Øª ØªÙˆ Ø¯Ø³ØªÙˆØ± Ø¨Ø¯Ù…ØŸ": "ÙÙ‚Ø· Ø³ÙˆØ§Ù„Øª Ø±Ùˆ Ø¨ÙØ±Ø³ØªØŒ Ù…Ù† Ø³Ø¹ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù… Ø¬ÙˆØ§Ø¨ Ø¨Ø¯Ù…! ğŸ˜Š"
}

# ØªØ§Ø¨Ø¹ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø¨Ù‡ØªØ±ÛŒÙ† ØªØ·Ø§Ø¨Ù‚ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Fuzzy Matching
def get_best_match(user_message):
    best_match, score = process.extractOne(user_message, qa_pairs.keys())
    if score > 60:  # ÙÙ‚Ø· Ø§Ú¯Ù‡ ØªØ´Ø§Ø¨Ù‡ Ø¨Ø§Ù„Ø§ÛŒ Û¶Û°Ùª Ø¨ÙˆØ¯ Ø¬ÙˆØ§Ø¨ Ø¨Ø¯Ù‡
        return qa_pairs[best_match]
    else:
        return "Ù…ØªÙˆØ¬Ù‡ Ù†Ø´Ø¯Ù…! Ù„Ø·ÙØ§Ù‹ ÙˆØ§Ø¶Ø­â€ŒØªØ± Ø¨Ù¾Ø±Ø³. ğŸ¤”"

# Ù‡Ù†Ø¯Ù„Ø± Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§
@bot.message_handler(func=lambda message: True)
def handle_message(message):
    response = get_best_match(message.text)
    bot.reply_to(message, response)

# Ø´Ø±ÙˆØ¹ Ø¨Ù‡ Ø¯Ø±ÛŒØ§ÙØª Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§
print("Ø±Ø¨Ø§Øª Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø´Ø¯...")
bot.polling()